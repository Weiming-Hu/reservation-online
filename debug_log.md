# 新一期待办事项

1/6/2016

今天，我将此工程又向前推进了一步，现在基本上可以满足使用的要求。现在对下阶段的工作做一个简单的记录。

- [ ] clean_old_records.html页面中应该以一种交互的方式来显示将要被删除的数据
- [ ] 关于cookie session，以前一直存在着问题，现在是否还会出现，特别是当部署到了云之后；
- [ ] 还有一些需要汉化的地方，例如客户界面以及管理员界面；
- [ ] 关于轻音社的介绍信息
- [ ] 可不可以设计标语和LOGO；
- [x] 检查jQuery是否加载成功 
- [x] 使用国内镜像的Jquery地址
- [x] 使用一种更加友好的错误返回形式，主要是在提交新的预约的界面；
- [x] 创建新账户时候，如何与已经存在的账户检测重叠
- [x] 登录界面应该检测是不是用户有意识的登录，如果是无意识的跳转到了这个界面，应该有提示语
- [x] 创建账户界面中，两次输入密码的相互检测；
- [x] 创建账户界面中，输入框的文字控制，例如纯字符串，最大字符数等等；


# 用户列表 #

** 超级用户 **
- admin ： admin@reservations

** 普通用户 **
- Check_On ： huweiming
- Limp_Bizkit ： limp2000
- Eric_Clapton ： eric2016
- Iron_maiden ： iron2016
- yuduotianguang ： ydtg2016
- wuya ： wuya2016
- SAP ： SAPSAP2016
- polyphia : polyphia123


# 待办事项 #

## 前端 ##

##### 设计 #####

- [x] 主页的显示，最好是能够做成一个直观的页面；
- [x] 主页背景的设计；
- [x] 预约时间的选择最好能够做成日历选择，已经被预约的时间段则是灰显；
- [ ] 标语和LOGO的设计；
- [ ] 汉化

##### JavaScript #####

- [ ] 输入文字的控制，例如纯字符的名称等等；
- [ ] 输入框的提示文字，例如可输入最大字符数，两次输入的密码不一致等等；

## 后台 ##

- [x] 新创建的账户与已经存在的账户之间的查重操作；
- [x] 没有登录的情况下，点击 == 添加预约 == 和 == 取消预约 == 之后进入到登录界面。在这里登录貌似会有问题；
		这个问题貌似是因为中文字符的原因，将登录账号修改之后，貌似没有问题了 April 23, 2016 1:08 PM
- [x] 上一个问题很可能是因为 == 中文字符 == 登录的原因，所以在设置账号的时候不能够设置中文的登录名 
		主页显示的是lastname，用户在注册时候指定了一个昵称
- [x] 有时候（如果你反复刷新的话），若干条已经添加的预约无法显示；
		貌似也是中文字符匹配问题，修改代码之后再本地测试无问题 April 23, 2016 1:10 PM
- [x] 密码修改是否已经实现？密码修改是不是和邮箱的设置有关系？如何修改密码？可以利用内建表格模板 : ~~[PasswordChangeForm](https://docs.djangoproject.com/en/1.9/topics/auth/default/#django.contrib.auth.forms.PasswordChangeForm)~~
```
u = User.objects.get(username__exact='john')
u.set_password('new password')
u.save()
```
- [ ] 以前所有的错误返回都是以Http404的方式返回，请给定一个更加合理的解决方法
- [ ] 所有与cookie相关的操作应该更加的可靠，可以参考[这里](http://www.aspku.com/tech/jiaoben/python/57691.html)

## 功能改进 ##

- [x] 当进入一个新的星期的时候，删除一个月以前的所有预约数据；
- [x] 以上功能的代码已经完成，但是现在需要创建一个页面来显式实现这个功能
	*（可以避免累积起来的过期预约压垮数据库）*


## 测试 ##

在这里列举出所有应该包含在测试中的项目。请清楚的描述他们的操作过程，以及预期结果。

#### 显示测试 ####

- [x] 数据库插入数据后，可正常显示，且无重复，重要信息不能为空，如名称日期和起止时间（添加数据库约束：distinct，not null，为超级用户添加权限grant等）
- [x] 数据库删除数据后，该条数据不再显示，刷新等其他操作不会影响数据的删除和插入（在所有相关和无关操作后实时打印数据库预约表的内容）

#### 登录测试 ####

- [x] 所有用户均可以正常登陆登出，登录后显示“username，欢迎您！”，登出后显示“游客，欢迎您！”
- [x] 用户唯一（不允许重复的用户名，注册时和之前用户名重复返回“此用户名已被注册”，不允许重复注册）

#### 数据库测试 ####

- [x] 预约成功后返回成功信息并实时打印数据库内容查看是否插入了新数据
- [x] 删除预约时，备选项是数据库内已有的且尚未使用的预约，删除操作后打印数据库查看是否删除了数据，并在预约表中空出该位置
- [x] 插入数据时，应遵循数据库约束，任何的错误都返回错误信息
	- [x] 起止时间在已有的排练时间内，返回“与其他排练时间冲突”错误提醒
	- [x] 起止时间之差大于三个小时，返回“时间不得长于三小时”错误提醒


# 其他参考 #

- Python+Django+SAE 系列教程: http://blog.csdn.net/hemeng/article/category/1913767
